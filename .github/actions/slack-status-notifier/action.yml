name: 'Status Notifier'
description: 'Sends customized messages based on job status'
inputs:
  success-message:
    description: 'Message to send on success'
    required: false
    default: 'âœ… Operation completed successfully'
  failure-message:
    description: 'Message to send on failure'
    required: false
    default: 'âŒ Operation failed'
  cancelled-message:
    description: 'Message to send on cancellation'
    required: false
    default: 'âš ï¸ Operation was cancelled'
  slack-channel:
    description: 'Slack channel ID'
    required: true
  slack-token:
    description: 'Slack bot token'
    required: true

runs:
  using: 'composite'
  steps:
    - name: Determine Status and Message
      id: status
      shell: bash
      run: |
        if [ "${{ job.status }}" == "success" ]; then
          echo "message=${{ inputs.success-message }}" >> $GITHUB_OUTPUT
          echo "emoji=âœ…" >> $GITHUB_OUTPUT
        elif [ "${{ job.status }}" == "failure" ]; then
          echo "message=${{ inputs.failure-message }}" >> $GITHUB_OUTPUT
          echo "emoji=âŒ" >> $GITHUB_OUTPUT
        elif [ "${{ job.status }}" == "cancelled" ]; then
          echo "message=${{ inputs.cancelled-message }}" >> $GITHUB_OUTPUT
          echo "emoji=âš ï¸" >> $GITHUB_OUTPUT
        else
          echo "message=Status: ${{ job.status }}" >> $GITHUB_OUTPUT
          echo "emoji=â„¹ï¸" >> $GITHUB_OUTPUT
        fi

    - name: Send Notification
      uses: slackapi/slack-github-action@v1.26.0
      with:
        channel-id: ${{ inputs.slack-channel }}
        slack-message: |
          ${{ steps.status.outputs.emoji }} ${{ steps.status.outputs.message }}
          
          ðŸ“‹ **Details:**
          â€¢ Repository: ${{ github.repository }}
          â€¢ Branch: ${{ github.ref_name }}
          â€¢ Commit: ${{ github.sha }}
          â€¢ Author: ${{ github.actor }}
          â€¢ Status: ${{ job.status }}
      env:
        SLACK_BOT_TOKEN: ${{ inputs.slack-token }}